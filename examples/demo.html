<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chiral é™æ€å®¢æˆ·ç«¯æ¼”ç¤º</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .demo-container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        h2 {
            color: #444;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        
        h3 {
            color: #555;
            margin-top: 25px;
        }
        
        .config-display {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        
        .controls {
            margin: 20px 0;
            padding: 15px;
            background: #e8f4fd;
            border-radius: 4px;
        }
        
        .control-group {
            margin-bottom: 15px;
        }
        
        label {
            display: inline-block;
            width: 120px;
            font-weight: 500;
        }
        
        input, select {
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 3px;
            margin-left: 10px;
        }
        
        button {
            background: #007cba;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 3px;
            cursor: pointer;
            margin: 5px;
        }
        
        button:hover {
            background: #005a87;
        }
        
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .status.success { background: #d4edda; color: #155724; }
        .status.error { background: #f8d7da; color: #721c24; }
        .status.info { background: #d1ecf1; color: #0c5460; }
        .status.warning { background: #fff3cd; color: #856404; }
        
        .code-example {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            overflow-x: auto;
        }
        
        .code-example pre {
            margin: 0;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
        }
        
        .platform-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        
        .platform-tab {
            padding: 10px 20px;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-bottom: none;
            cursor: pointer;
            margin-right: 5px;
            border-radius: 5px 5px 0 0;
        }
        
        .platform-tab.active {
            background: white;
            border-bottom: 1px solid white;
            margin-bottom: -1px;
        }
        
        .platform-content {
            display: none;
        }
        
        .platform-content.active {
            display: block;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            color: #666;
            font-size: 14px;
        }
        
        .highlight {
            background: #fff3cd;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
            border-left: 4px solid #ffc107;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1>ğŸŒ€ Chiral é™æ€å®¢æˆ·ç«¯æ¼”ç¤º</h1>
        
        <div class="highlight">
            <strong>ğŸ’¡ è¿™æ˜¯ä»€ä¹ˆï¼Ÿ</strong><br>
            Chiral JS å®¢æˆ·ç«¯è®©æ‚¨çš„é™æ€åšå®¢ï¼ˆHugoã€Jekyllã€Hexoç­‰ï¼‰èƒ½å¤Ÿæ˜¾ç¤ºæ¥è‡ª Chiral ç½‘ç»œçš„ç›¸å…³æ–‡ç« ã€‚
            åªéœ€å‡ è¡Œä»£ç ï¼Œå°±èƒ½è®©æ‚¨çš„è¯»è€…å‘ç°æ›´å¤šç›¸å…³çš„ä¼˜è´¨å†…å®¹ï¼
        </div>
        
        <div class="controls">
            <h2>ğŸ›ï¸ å®æ—¶é…ç½®</h2>
            <div class="control-group">
                <label>Hub URL:</label>
                <input type="text" id="hubUrl" value="https://hub.example.com" style="width: 300px;">
            </div>
            <div class="control-group">
                <label>Node ID:</label>
                <input type="text" id="nodeId" value="demo-blog" style="width: 200px;">
            </div>
            <div class="control-group">
                <label>é¡µé¢ URL:</label>
                <input type="text" id="postUrl" value="https://blog.example.com/demo-post" style="width: 300px;">
            </div>
            <div class="control-group">
                <label>æ–‡ç« æ•°é‡:</label>
                <input type="number" id="count" value="5" min="1" max="20" style="width: 80px;">
            </div>
            <div class="control-group">
                <label>è¯­è¨€:</label>
                <select id="locale">
                    <option value="en">English</option>
                    <option value="zh-CN" selected>ç®€ä½“ä¸­æ–‡</option>
                    <option value="zh-TW">ç¹ä½“ä¸­æ–‡</option>
                    <option value="ja">æ—¥æœ¬èª</option>
                </select>
            </div>
            <button onclick="updateConfig()">æ›´æ–°é…ç½®</button>
            <button onclick="testConnection()">æµ‹è¯•è¿æ¥</button>
            <button onclick="clearCache()">æ¸…é™¤ç¼“å­˜</button>
            <button onclick="getStats()">ç¼“å­˜ç»Ÿè®¡</button>
        </div>

        <div id="status"></div>

        <h2>ğŸ“„ å½“å‰é…ç½®</h2>
        <div class="config-display" id="configDisplay">
            <!-- é…ç½®å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>

        <h2>ğŸ¯ ç›¸å…³æ–‡ç« æ˜¾ç¤ºåŒºåŸŸ</h2>
        <p>ä»¥ä¸‹åŒºåŸŸå°†æ˜¾ç¤ºæ¥è‡ª Chiral ç½‘ç»œçš„ç›¸å…³æ–‡ç« ï¼š</p>
        <div id="chiral-connector-related-posts" 
             class="chiral-connector-related-posts-container"
             data-post-url="https://blog.example.com/demo-post"
             data-node-id="demo-blog"
             data-hub-url="https://hub.example.com"
             data-count="5">
            åŠ è½½ä¸­çš„ç›¸å…³ Chiral æ•°æ®...
        </div>
    </div>

    <div class="demo-container">
        <h2>ğŸ“‹ é›†æˆä»£ç ç¤ºä¾‹</h2>
        
        <div class="platform-tabs">
            <div class="platform-tab active" onclick="showPlatform('basic')">åŸºç¡€HTML</div>
            <div class="platform-tab" onclick="showPlatform('hugo')">Hugo</div>
            <div class="platform-tab" onclick="showPlatform('jekyll')">Jekyll</div>
            <div class="platform-tab" onclick="showPlatform('hexo')">Hexo</div>
        </div>

        <div id="basic" class="platform-content active">
            <h3>åŸºç¡€ HTML é›†æˆ</h3>
            <div class="code-example">
                <pre>&lt;!-- 1. å¼•å…¥æ ·å¼ --&gt;
&lt;link rel="stylesheet" href="/assets/chiral-client.min.css"&gt;

&lt;!-- 2. é…ç½®å®¢æˆ·ç«¯ --&gt;
&lt;script&gt;
window.ChiralConfig = {
    hubUrl: 'https://your-hub.com',
    nodeId: 'your-blog-id',
    display: {
        count: 5,
        showThumbnails: true,
        showExcerpts: true
    },
    i18n: {
        locale: 'zh-CN'
    }
};
&lt;/script&gt;

&lt;!-- 3. æ·»åŠ æ˜¾ç¤ºå®¹å™¨ --&gt;
&lt;div id="chiral-connector-related-posts" 
     data-post-url="https://blog.com/current-post"
     data-node-id="your-blog-id"
     data-hub-url="https://your-hub.com"&gt;
    Loading...
&lt;/div&gt;

&lt;!-- 4. å¼•å…¥å®¢æˆ·ç«¯è„šæœ¬ --&gt;
&lt;script src="/assets/chiral-client.min.js"&gt;&lt;/script&gt;</pre>
            </div>
        </div>

        <div id="hugo" class="platform-content">
            <h3>Hugo é›†æˆ</h3>
            <p><strong>æ­¥éª¤1ï¼š</strong> åœ¨ <code>config.yaml</code> ä¸­æ·»åŠ é…ç½®ï¼š</p>
            <div class="code-example">
                <pre>params:
  chiral:
    enable: true
    hubUrl: "https://your-hub.com"
    nodeId: "your-hugo-blog"
    count: 5</pre>
            </div>
            
            <p><strong>æ­¥éª¤2ï¼š</strong> åˆ›å»º <code>layouts/partials/chiral-related.html</code>ï¼š</p>
            <div class="code-example">
                <pre>{{ if .Site.Params.chiral.enable }}
&lt;link rel="stylesheet" href="{{ "/assets/chiral-client.min.css" | relURL }}"&gt;

&lt;script&gt;
window.ChiralConfig = {
    hubUrl: '{{ .Site.Params.chiral.hubUrl }}',
    nodeId: '{{ .Site.Params.chiral.nodeId }}',
    display: {
        count: {{ .Site.Params.chiral.count | default 5 }}
    }
};
&lt;/script&gt;

&lt;div id="chiral-connector-related-posts" 
     data-post-url="{{ .Permalink }}"
     data-node-id="{{ .Site.Params.chiral.nodeId }}"
     data-hub-url="{{ .Site.Params.chiral.hubUrl }}"&gt;
    Loading related Chiral data...
&lt;/div&gt;

&lt;script src="{{ "/assets/chiral-client.min.js" | relURL }}"&gt;&lt;/script&gt;
{{ end }}</pre>
            </div>
            
            <p><strong>æ­¥éª¤3ï¼š</strong> åœ¨æ–‡ç« æ¨¡æ¿ä¸­è°ƒç”¨ï¼š</p>
            <div class="code-example">
                <pre>{{ .Content }}
{{ partial "chiral-related.html" . }}</pre>
            </div>
        </div>

        <div id="jekyll" class="platform-content">
            <h3>Jekyll é›†æˆ</h3>
            <p><strong>æ­¥éª¤1ï¼š</strong> åœ¨ <code>_config.yml</code> ä¸­æ·»åŠ é…ç½®ï¼š</p>
            <div class="code-example">
                <pre>chiral:
  enable: true
  hubUrl: "https://your-hub.com"
  nodeId: "your-jekyll-blog"
  count: 5</pre>
            </div>
            
            <p><strong>æ­¥éª¤2ï¼š</strong> åˆ›å»º <code>_includes/chiral-related.html</code>ï¼š</p>
            <div class="code-example">
                <pre>{% if site.chiral.enable %}
&lt;link rel="stylesheet" href="{{ '/assets/chiral-client.min.css' | relative_url }}"&gt;

&lt;script&gt;
window.ChiralConfig = {
    hubUrl: '{{ site.chiral.hubUrl }}',
    nodeId: '{{ site.chiral.nodeId }}',
    display: {
        count: {{ site.chiral.count | default: 5 }}
    }
};
&lt;/script&gt;

&lt;div id="chiral-connector-related-posts" 
     data-post-url="{{ page.url | absolute_url }}"
     data-node-id="{{ site.chiral.nodeId }}"
     data-hub-url="{{ site.chiral.hubUrl }}"&gt;
    Loading related Chiral data...
&lt;/div&gt;

&lt;script src="{{ '/assets/chiral-client.min.js' | relative_url }}"&gt;&lt;/script&gt;
{% endif %}</pre>
            </div>
            
            <p><strong>æ­¥éª¤3ï¼š</strong> åœ¨ <code>_layouts/post.html</code> ä¸­è°ƒç”¨ï¼š</p>
            <div class="code-example">
                <pre>{{ content }}
{% include chiral-related.html %}</pre>
            </div>
        </div>

        <div id="hexo" class="platform-content">
            <h3>Hexo é›†æˆ</h3>
            <p><strong>æ­¥éª¤1ï¼š</strong> åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> ä¸­æ·»åŠ é…ç½®ï¼š</p>
            <div class="code-example">
                <pre>chiral:
  enable: true
  hubUrl: "https://your-hub.com"
  nodeId: "your-hexo-blog"
  count: 5</pre>
            </div>
            
            <p><strong>æ­¥éª¤2ï¼š</strong> åœ¨ <code>layout/_partial/chiral-related.ejs</code> ä¸­ï¼š</p>
            <div class="code-example">
                <pre>&lt;% if (theme.chiral && theme.chiral.enable) { %&gt;
&lt;link rel="stylesheet" href="&lt;%- url_for('/assets/chiral-client.min.css') %&gt;"&gt;

&lt;script&gt;
window.ChiralConfig = {
    hubUrl: '&lt;%= theme.chiral.hubUrl %&gt;',
    nodeId: '&lt;%= theme.chiral.nodeId %&gt;',
    display: {
        count: &lt;%= theme.chiral.count || 5 %&gt;
    }
};
&lt;/script&gt;

&lt;div id="chiral-connector-related-posts" 
     data-post-url="&lt;%= config.url %&gt;&lt;%= url_for(page.path) %&gt;"
     data-node-id="&lt;%= theme.chiral.nodeId %&gt;"
     data-hub-url="&lt;%= theme.chiral.hubUrl %&gt;"&gt;
    Loading related Chiral data...
&lt;/div&gt;

&lt;script src="&lt;%- url_for('/assets/chiral-client.min.js') %&gt;"&gt;&lt;/script&gt;
&lt;% } %&gt;</pre>
            </div>
            
            <p><strong>æ­¥éª¤3ï¼š</strong> åœ¨æ–‡ç« æ¨¡æ¿ä¸­è°ƒç”¨ï¼š</p>
            <div class="code-example">
                <pre>&lt;%- partial('_partial/chiral-related') %&gt;</pre>
            </div>
        </div>
    </div>

    <div class="demo-container">
        <h2>ğŸ”§ è°ƒè¯•å·¥å…·</h2>
        <p>æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼Œåœ¨æ§åˆ¶å°ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œè°ƒè¯•ï¼š</p>
        
        <div class="code-example">
            <pre>// æŸ¥çœ‹å®¢æˆ·ç«¯ä¿¡æ¯
window.chiralClientInstance.getInfo()

// æµ‹è¯•Hubè¿æ¥
window.chiralClientInstance.testConnection()

// æŸ¥çœ‹ç¼“å­˜ç»Ÿè®¡
window.chiralClientInstance.getCacheStats()

// æ¸…é™¤æ‰€æœ‰ç¼“å­˜
window.chiralClientInstance.clearCache()

// å¯ç”¨è°ƒè¯•æ—¥å¿—
localStorage.setItem('chiral_debug', 'true');</pre>
        </div>
        
        <h3>å¸¸è§é—®é¢˜æ’æŸ¥</h3>
        <ul>
            <li><strong>æ˜¾ç¤º"é¡µé¢æœªæ‰¾åˆ°"</strong>ï¼šæ‚¨çš„æ–‡ç« å¯èƒ½å°šæœªè¢«Hubçˆ¬è™«æŠ“å–</li>
            <li><strong>é…ç½®é”™è¯¯</strong>ï¼šæ£€æŸ¥hubUrlå’ŒnodeIdæ˜¯å¦æ­£ç¡®</li>
            <li><strong>ç½‘ç»œé”™è¯¯</strong>ï¼šç¡®è®¤Hubåœ°å€å¯ä»¥æ­£å¸¸è®¿é—®</li>
            <li><strong>æ ·å¼å¼‚å¸¸</strong>ï¼šç¡®è®¤CSSæ–‡ä»¶å·²æ­£ç¡®åŠ è½½</li>
        </ul>
    </div>

    <div class="footer">
        <p>
            ğŸ“š <strong>å®Œæ•´æ–‡æ¡£</strong>ï¼šæŸ¥çœ‹ <code>USAGE_GUIDE.md</code> è·å–è¯¦ç»†ä½¿ç”¨è¯´æ˜<br>
            ğŸš€ <strong>å¿«é€Ÿä¸Šæ‰‹</strong>ï¼šæŸ¥çœ‹ <code>QUICK_START.md</code> è·å–å¿«é€Ÿé…ç½®æŒ‡å—<br>
            ğŸ’¡ <strong>è·å–å¸®åŠ©</strong>ï¼šæäº¤ GitHub Issues æˆ–è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿ
        </p>
    </div>

    <!-- Chiral é™æ€å®¢æˆ·ç«¯ CSS -->
    <link rel="stylesheet" href="../assets/chiral-client.css">

    <!-- Chiral é…ç½® -->
    <script>
        // åˆå§‹é…ç½®
        window.ChiralConfig = {
            hubUrl: 'https://hub.example.com',
            nodeId: 'demo-blog',
            i18n: {
                locale: 'zh-CN'
            },
            display: {
                count: 5,
                enableCache: true,
                cacheTTL: 3600,
                showThumbnails: true,
                showExcerpts: true
            }
        };

        // æ¼”ç¤ºå‡½æ•°
        function showStatus(message, type = 'info') {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
            setTimeout(() => {
                statusDiv.innerHTML = '';
            }, 5000);
        }

        function updateConfigDisplay() {
            const configDisplay = document.getElementById('configDisplay');
            configDisplay.innerHTML = `<pre>${JSON.stringify(window.ChiralConfig, null, 2)}</pre>`;
        }

        function updateConfig() {
            const hubUrl = document.getElementById('hubUrl').value;
            const nodeId = document.getElementById('nodeId').value;
            const postUrl = document.getElementById('postUrl').value;
            const count = parseInt(document.getElementById('count').value);
            const locale = document.getElementById('locale').value;

            // æ›´æ–°å…¨å±€é…ç½®
            window.ChiralConfig.hubUrl = hubUrl;
            window.ChiralConfig.nodeId = nodeId;
            window.ChiralConfig.display.count = count;
            window.ChiralConfig.i18n.locale = locale;

            // æ›´æ–°å®¹å™¨å±æ€§
            const container = document.getElementById('chiral-connector-related-posts');
            container.setAttribute('data-post-url', postUrl);
            container.setAttribute('data-node-id', nodeId);
            container.setAttribute('data-hub-url', hubUrl);
            container.setAttribute('data-count', count);

            updateConfigDisplay();
            showStatus('é…ç½®å·²æ›´æ–°ï¼è¯·ç­‰å¾…å®¢æˆ·ç«¯é‡æ–°åŠ è½½æ•°æ®...', 'success');

            // é‡æ–°åˆå§‹åŒ–å®¢æˆ·ç«¯
            if (window.chiralClientInstance) {
                setTimeout(() => {
                    location.reload();
                }, 1000);
            }
        }

        async function testConnection() {
            if (!window.chiralClientInstance) {
                showStatus('å®¢æˆ·ç«¯å°šæœªåˆå§‹åŒ–', 'warning');
                return;
            }

            try {
                showStatus('æ­£åœ¨æµ‹è¯•è¿æ¥...', 'info');
                const result = await window.chiralClientInstance.testConnection();
                if (result) {
                    showStatus('è¿æ¥æµ‹è¯•æˆåŠŸï¼', 'success');
                } else {
                    showStatus('è¿æ¥æµ‹è¯•å¤±è´¥ï¼Œè¯·æ£€æŸ¥Hubåœ°å€', 'error');
                }
            } catch (error) {
                showStatus(`è¿æ¥æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
            }
        }

        function clearCache() {
            if (!window.chiralClientInstance) {
                showStatus('å®¢æˆ·ç«¯å°šæœªåˆå§‹åŒ–', 'warning');
                return;
            }

            const cleared = window.chiralClientInstance.clearCache();
            showStatus(`å·²æ¸…é™¤ ${cleared} ä¸ªç¼“å­˜é¡¹`, 'success');
        }

        function getStats() {
            if (!window.chiralClientInstance) {
                showStatus('å®¢æˆ·ç«¯å°šæœªåˆå§‹åŒ–', 'warning');
                return;
            }

            const stats = window.chiralClientInstance.getCacheStats();
            const message = `ç¼“å­˜ç»Ÿè®¡: ${stats.totalItems} é¡¹, ${stats.totalSize} å­—èŠ‚, å‘½ä¸­ç‡: ${stats.hitRate}%`;
            showStatus(message, 'info');
        }

        function showPlatform(platform) {
            // éšè—æ‰€æœ‰æ ‡ç­¾é¡µ
            document.querySelectorAll('.platform-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.platform-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾é¡µ
            document.getElementById(platform).classList.add('active');
            event.target.classList.add('active');
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateConfigDisplay();
            
            // æ£€æŸ¥å®¢æˆ·ç«¯æ˜¯å¦æˆåŠŸåŠ è½½
            setTimeout(() => {
                if (window.chiralClientInstance) {
                    showStatus('Chiral å®¢æˆ·ç«¯å·²æˆåŠŸåŠ è½½ï¼', 'success');
                } else {
                    showStatus('Chiral å®¢æˆ·ç«¯åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥é…ç½®', 'error');
                }
            }, 2000);
        });
    </script>

    <!-- å¼•å…¥ JS å®¢æˆ·ç«¯ -->
    <script src="../assets/chiral-client.js"></script>
</body>
</html> 